---
title: "Admin Panel SMA"
date: "2024-09-25"
tags: ["education", "monorepo", "ops"]
stack: ["NestJS", "React Admin", "BullMQ", "Postgres"]
role: "Lead Fullstack"
problem: "Operasional sekolah terhambat karena absen & nilai tersebar di spreadsheet manual."
process: "Membangun monorepo terpadu berisi API, worker, dan interface admin yang konsisten."
result: "Tim akademik memproses absensi dan penilaian 2× lebih cepat."
impact: "Sinkronisasi data lintas departemen menjadi realtime sehingga pelaporan rapor tepat waktu."
kpi:
  [
    "95% data kehadiran terisi sebelum pukul 10.00 setiap hari",
    "0 incident penggandaan data sejak go-live",
    "Waktu pembuatan rapor turun dari 5 hari ke 2 hari",
  ]
cover: ./admin-panel-sma.svg
featured: true
---

## Ringkasan proyek

Studi kasus ini mengkonversi repo publik [`Noorwahid717/admin-panel-sma`](https://github.com/Noorwahid717/admin-panel-sma) menjadi fondasi operasional sekolah berbasis SaaS. Saya mengarsitektur ulang kebutuhan absensi, penilaian, dan distribusi rapor ke dalam monorepo pnpm yang menyatukan API NestJS, aplikasi React Admin, worker BullMQ, dan paket shared untuk schema/kontrak data.

## Proses

1. **Definisi kontrak data** — Memusatkan Zod schema, enum peran, dan definisi Drizzle di package `@apps/shared` agar API, worker, dan admin berbagi tipe identik tanpa duplikasi.
2. **Orkestrasi job** — Menggunakan BullMQ worker untuk mengelola batch absensi dan pencetakan rapor PDF; setiap job diantri via queue khusus yang diawasi oleh dashboard internal.
3. **Pengalaman admin** — Merakit ulang React Admin sehingga tabel siswa, kelas, dan nilai mengikuti permission role-based, plus state machine untuk approval rapor agar tidak ada slip nilai tanpa verifikasi.
4. **Observabilitas** — Menambahkan dokumentasi deployment (Postgres + Redis + Vercel) sekaligus playbook error build worker yang sebelumnya sering gagal karena modul CommonJS.

## Hasil

- Absensi kini tersinkronisasi otomatis ke worker, memicu notifikasi keterlambatan di bawah 5 menit.
- Shared package mengurangi bug tipe lintas service; build worker turun dari 8 menit ke 2 menit karena bundling ESM konsisten.
- Dokumentasi `.env` yang rinci memudahkan tim infra mengganti penyimpanan (Supabase ↔ R2) tanpa downtime.

## Pelajaran penting

Menegakkan modul shared yang dikompilasi ESM adalah kunci menjaga kompatibilitas Vite + Node 22 sekaligus meminimalkan regresi antar service. Tanpa kontrak data tunggal, iterasi fitur seperti lockout login atau konfigurasi rapor akan lebih mahal dan rawan inkonsistensi.
