---
// Wave Divider - Smooth transition between sections
interface Props {
  variant?: "top" | "bottom" | "both";
  color?: "bg" | "surface" | "accent";
  opacity?: number;
}

const { variant = "bottom", color = "bg", opacity = 0.15 } = Astro.props;

const colorMap = {
  bg: "var(--color-bg)",
  surface: "var(--color-surface)",
  accent: "var(--color-accent)",
};
---

<div class={`wave-divider wave-${variant}`} data-color={color}>
  {
    (variant === "top" || variant === "both") && (
      <svg
        class="wave-svg wave-top"
        viewBox="0 0 1200 120"
        preserveAspectRatio="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M0,0 C150,60 350,0 600,40 C850,80 1050,20 1200,60 L1200,120 L0,120 Z"
          style={`fill: rgb(${colorMap[color]} / ${opacity})`}
        />
      </svg>
    )
  }

  {
    (variant === "bottom" || variant === "both") && (
      <svg
        class="wave-svg wave-bottom"
        viewBox="0 0 1200 120"
        preserveAspectRatio="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M0,60 C150,20 350,80 600,40 C850,0 1050,60 1200,0 L1200,0 L0,0 Z"
          style={`fill: rgb(${colorMap[color]} / ${opacity})`}
        />
      </svg>
    )
  }
</div>

<style>
  .wave-divider {
    position: relative;
    width: 100%;
    height: 0;
    overflow: visible;
  }

  .wave-svg {
    position: absolute;
    left: 0;
    width: 100%;
    height: 60px;
    pointer-events: none;
  }

  .wave-top {
    top: 0;
    transform: translateY(-100%);
  }

  .wave-bottom {
    bottom: 0;
    transform: translateY(100%) rotate(180deg);
  }

  @media (max-width: 768px) {
    .wave-svg {
      height: 40px;
    }
  }
</style>
